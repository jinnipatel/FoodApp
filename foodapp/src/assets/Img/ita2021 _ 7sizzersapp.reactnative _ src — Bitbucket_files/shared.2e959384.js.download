!function(e,r,t,o,s){var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i="function"==typeof n.parcelRequire5160&&n.parcelRequire5160,c=i.cache||{},a="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function l(r,t){if(!c[r]){if(!e[r]){var o="function"==typeof n.parcelRequire5160&&n.parcelRequire5160;if(!t&&o)return o(r,!0);if(i)return i(r,!0);if(a&&"string"==typeof r)return a(r);var s=new Error("Cannot find module '"+r+"'");throw s.code="MODULE_NOT_FOUND",s}p.resolve=function(t){return e[r][1][t]||t},p.cache={};var u=c[r]=new l.Module(r);e[r][0].call(u.exports,p,u,u.exports,this)}return c[r].exports;function p(e){return l(p.resolve(e))}}l.isParcelRequire=!0,l.Module=function(e){this.id=e,this.bundle=l,this.exports={}},l.modules=e,l.cache=c,l.parent=i,l.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]},Object.defineProperty(l,"root",{get:function(){return n.parcelRequire5160}}),n.parcelRequire5160=l;for(var u=0;u<r.length;u++)l(r[u])}({"1xj6K":[function(e,r,t){var o=e("@atlassian/parcel-transformer-js/lib/esmodule-helpers.js");o.defineInteropFlag(t);var s=e("qs"),n=o.interopDefault(s),i=e("react"),c=e("react-redux"),a=e("src/selectors/repository-selectors"),l=e("../actions"),u=e("../actions/load-source");const p={loadSource:o.interopDefault(u).default,unloadSource:()=>({type:l.UNLOAD_SOURCE})};t.default=c.connect((e=>({currentRef:e.repository.source.section.ref,hash:e.repository.source.section.hash,repository:a.getCurrentRepository(e)})),p)(class extends i.PureComponent{componentDidMount(){this.loadSource(this.props)}UNSAFE_componentWillReceiveProps(e){const{repository:r}=this.props,{repository:t}=e;(r&&t&&r.uuid!==t.uuid||!r&&t||this.didUrlRefOrHashTargetChange(e))&&this.loadSource(e)}componentWillUnmount(){this.props.unloadSource()}loadSource(e){const{search:r}=e.location,t=n.default.parse(r,{ignoreQueryPrefix:!0}),{repositoryOwner:o,repositorySlug:s,refOrHash:i}=e.match.params;if(o&&s){const e=`${o}/${s}`;this.props.loadSource({repositoryFullSlug:e,refOrHash:i},t.at)}}didUrlRefOrHashTargetChange(e){const{currentRef:r,hash:t,match:o,repository:s}=this.props,n=o.params.refOrHash,i=e.match.params.refOrHash,c=r?r.name:null,a=s&&s.mainbranch?s.mainbranch.name:null,l=!(!c||c!==a);return n!==i&&!(!n&&!!i&&l)&&!(!i&&l)&&!(t===i)}render(){return this.props.children||null}})},{qs:"6u280",react:"28H6D","react-redux":"5NPwH","src/selectors/repository-selectors":"3Vekm","../actions":"7a6j5","../actions/load-source":"3KeiK","@atlassian/parcel-transformer-js/lib/esmodule-helpers.js":"13YCs"}],"3KeiK":[function(e,r,t){var o=e("@atlassian/parcel-transformer-js/lib/esmodule-helpers.js");o.defineInteropFlag(t);var s=e("src/redux/actions"),n=e("src/urls/source"),i=o.interopDefault(n),c=e("./");t.default=({repositoryFullSlug:e,refOrHash:r},t)=>s.hydrateAction(c.FetchSource,"repository.source.section",{url:i.default.ui.source(e,{refOrHash:r,at:t,applyRouterFix:!1})})},{"src/redux/actions":"1SFEK","src/urls/source":"4aV7V","./":"7a6j5","@atlassian/parcel-transformer-js/lib/esmodule-helpers.js":"13YCs"}],"13XsH":[function(e,r,t){var o=e("@atlassian/parcel-transformer-js/lib/esmodule-helpers.js");o.defineInteropFlag(t);var s=e("react-redux"),n=e("src/selectors/repository-selectors"),i=e("../components/ref-selector"),c=o.interopDefault(i);t.default=s.connect((e=>({currentRef:e.repository.source.section.ref,repository:n.getCurrentRepository(e)})))(c.default)},{"react-redux":"5NPwH","src/selectors/repository-selectors":"3Vekm","../components/ref-selector":"5fVDf","@atlassian/parcel-transformer-js/lib/esmodule-helpers.js":"13YCs"}],"5fVDf":[function(e,r,t){var o=e("@atlassian/parcel-transformer-js/lib/esmodule-helpers.js");o.defineInteropFlag(t);var s=e("@babel/runtime/helpers/defineProperty"),n=o.interopDefault(s),i=e("react"),c=o.interopDefault(i),a=e("@atlassian/bitkit-analytics"),l=e("src/sections/repository/components/ref-selector"),u=o.interopDefault(l),p=e("src/sections/repository/components/ref-selector/ref-selector.style"),f=e("src/sections/repository/facts"),d=e("src/urls/source"),h=o.interopDefault(d),y=e("src/utils/analytics/publish");class b extends i.PureComponent{constructor(...e){super(...e),n.default(this,"refUrl",((e,r)=>{const{path:t}=this.props;return h.default.ui.sourceWithRef(r.full_name,e,{path:t})})),n.default(this,"handleOpen",(()=>{const{repository:e}=this.props;e&&(y.publishFact(new f.SourceFileActionClickedFact({label:"branches",repository_uuid:a.uncurlyUuid(e.uuid),frontbucket_view:!0})),y.publishUiEvent({source:"file",action:"clicked",actionSubject:"dropdown",actionSubjectId:"refSelector",objectType:"repository",objectId:a.uncurlyUuid(e.uuid),containerType:"workspace",containerId:null!=e&&e.workspace?a.uncurlyUuid(e.workspace.uuid):"",attributes:{label:"branches",repository_uuid:a.uncurlyUuid(e.uuid),frontbucket_view:!0}}))}))}render(){const{currentRef:e,repository:r}=this.props;return r?c.default.createElement(u.default,{label:e?e.name:void 0,onOpen:this.handleOpen,renderRef:e=>r?c.default.createElement(p.RefLink,{onClick:()=>{y.publishFact(new f.SourceFileActionClickedFact({label:"branch_selected",repository_uuid:a.uncurlyUuid(r.uuid),frontbucket_view:!0})),y.publishUiEvent({source:"refSelector",action:"clicked",actionSubject:"link",actionSubjectId:"refLink",objectType:"repository",objectId:a.uncurlyUuid(r.uuid),containerType:"workspace",containerId:null!=r&&r.workspace?a.uncurlyUuid(r.workspace.uuid):"",attributes:{label:"branch_selected",repository_uuid:a.uncurlyUuid(r.uuid),frontbucket_view:!0}})},href:this.refUrl(e,r)},e.name):null,repository:r}):null}}t.default=b},{"@babel/runtime/helpers/defineProperty":"5MCal",react:"28H6D","@atlassian/bitkit-analytics":"5YLSk","src/sections/repository/components/ref-selector":"5fbLX","src/sections/repository/components/ref-selector/ref-selector.style":"20iA0","src/sections/repository/facts":"46Pt9","src/urls/source":"4aV7V","src/utils/analytics/publish":"3nwSx","@atlassian/parcel-transformer-js/lib/esmodule-helpers.js":"13YCs"}]},[]);
//# sourceMappingURL=shared.2e959384.js.map
